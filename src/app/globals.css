@import "tailwindcss";

:root {
  --background: #09090b;
  --foreground: #fafafa;
  --surface: #18181b;
  --elevated: #27272a;
  --accent-surface: #3f3f46;
  --edge: #3f3f46;
  --overlay-bg: rgba(9, 9, 11, 0.8);
  --secondary-fg: #e4e4e7;
  --muted-fg: #a1a1aa;
  --faint-fg: #71717a;
  --dim-fg: #52525b;
}

.light {
  --background: #f0f2f5;
  --foreground: #111827;
  --surface: #ffffff;
  --elevated: #f3f4f6;
  --accent-surface: #e5e7eb;
  --edge: #d1d5db;
  --overlay-bg: rgba(255, 255, 255, 0.85);
  --secondary-fg: #374151;
  --muted-fg: #6b7280;
  --faint-fg: #9ca3af;
  --dim-fg: #d1d5db;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-surface: var(--surface);
  --color-elevated: var(--elevated);
  --color-accent-surface: var(--accent-surface);
  --color-edge: var(--edge);
  --color-secondary-fg: var(--secondary-fg);
  --color-muted-fg: var(--muted-fg);
  --color-faint-fg: var(--faint-fg);
  --color-dim-fg: var(--dim-fg);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* WattWay logo — Tesla-inspired wordmark */
.wattway-logo {
  font-family: "Gotham", "Montserrat", "Inter", "Helvetica Neue", Arial, sans-serif;
  font-weight: 700;
  letter-spacing: 0.22em;
  font-size: 17px;
  text-transform: uppercase;
}

/* Custom scrollbar */
.scrollbar-thin::-webkit-scrollbar {
  width: 4px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: var(--edge);
  border-radius: 2px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--accent-surface);
}

/* Hidden scrollbar */
.scrollbar-none::-webkit-scrollbar {
  display: none;
}

.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Leaflet overrides */
.leaflet-container {
  background: var(--background) !important;
  font-family: inherit !important;
}

.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

.leaflet-control-zoom a {
  background: var(--surface) !important;
  color: var(--muted-fg) !important;
  border: 1px solid var(--edge) !important;
  width: 36px !important;
  height: 36px !important;
  line-height: 36px !important;
  font-size: 16px !important;
}

.leaflet-control-zoom a:hover {
  background: var(--elevated) !important;
  color: var(--foreground) !important;
}

.leaflet-control-attribution {
  background: var(--overlay-bg) !important;
  color: var(--dim-fg) !important;
  font-size: 10px !important;
  padding: 2px 6px !important;
}

.leaflet-control-attribution a {
  color: var(--faint-fg) !important;
}

.leaflet-popup-content-wrapper {
  background: var(--surface) !important;
  color: var(--foreground) !important;
  border-radius: 12px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  border: 1px solid var(--edge) !important;
}

.leaflet-popup-tip {
  background: var(--surface) !important;
}

.leaflet-popup-content {
  margin: 12px 14px !important;
  color: var(--secondary-fg) !important;
}

.leaflet-popup-close-button {
  color: var(--faint-fg) !important;
}

.custom-marker {
  background: transparent !important;
  border: none !important;
}

/* Logo blink animation */
@keyframes logo-blink {
  0%, 80%, 100% { opacity: 1; }
  85% { opacity: 0.2; }
  90% { opacity: 0.9; }
  95% { opacity: 0.3; }
}

.logo-blink {
  animation: logo-blink 3s ease-in-out infinite;
}

/* Charger pulse animation */
@keyframes charger-ping {
  0% {
    transform: scale(0.8);
    opacity: 0.6;
  }
  70% {
    transform: scale(1.3);
    opacity: 0;
  }
  100% {
    transform: scale(1.3);
    opacity: 0;
  }
}

@keyframes charger-glow {
  0%, 100% {
    opacity: 0.12;
    transform: scale(1);
  }
  50% {
    opacity: 0.25;
    transform: scale(1.1);
  }
}

/* Animations */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-from-bottom-4 {
  from { transform: translateY(16px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slide-in-from-top-2 {
  from { transform: translateY(-8px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.animate-in {
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fade-in;
}

.slide-in-from-bottom-4 {
  animation-name: fade-in, slide-in-from-bottom-4;
}

.slide-in-from-top-2 {
  animation-name: fade-in, slide-in-from-top-2;
}

.duration-200 {
  animation-duration: 200ms;
}

.duration-500 {
  animation-duration: 500ms;
}

/* Line clamp */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Wizard step animation */
@keyframes wizard-step-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.wizard-step-enter {
  animation: wizard-step-enter 250ms ease-out both;
}

/* Sheet slide-up animation */
@keyframes sheet-slide-up {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.mobile-sheet-enter {
  animation: sheet-slide-up 300ms cubic-bezier(0.32, 0.72, 0, 1) both;
}

/* Mobile overrides */
@media (max-width: 767px) {
  .leaflet-control-zoom {
    margin-bottom: 5rem !important; /* clears collapsed bottom sheet */
    margin-right: 0.5rem !important;
  }

  .leaflet-control-zoom a {
    width: 40px !important;
    height: 40px !important;
    line-height: 40px !important;
    font-size: 18px !important;
  }

  .leaflet-control-attribution {
    font-size: 9px !important;
  }

  .leaflet-popup-content-wrapper {
    max-width: calc(100vw - 60px) !important;
    border-radius: 10px !important;
  }

  .leaflet-popup-content {
    margin: 10px 12px !important;
    font-size: 12px !important;
  }

  .leaflet-popup-close-button {
    width: 28px !important;
    height: 28px !important;
    font-size: 20px !important;
    padding: 4px !important;
  }
}

/* Onboarding animations */
@keyframes onboarding-fade-in {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes onboarding-card-stagger {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.onboarding-fade-in {
  animation: onboarding-fade-in 0.5s ease-out both;
}

.onboarding-card-stagger {
  animation: onboarding-card-stagger 0.4s ease-out both;
}

/* Onboarding battery slider thumb — larger on mobile for touch */
.onboarding-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  border: 2px solid rgba(255, 255, 255, 0.9);
}

.onboarding-slider::-moz-range-thumb {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  border: 2px solid rgba(255, 255, 255, 0.9);
}

@media (min-width: 768px) {
  .onboarding-slider::-webkit-slider-thumb {
    width: 24px;
    height: 24px;
  }
  .onboarding-slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
  }
}

.battery-fill-glow {
  transition: width 0.15s ease-out, background 0.3s ease;
}

/* Safe area insets for notched devices */
.safe-area-top {
  padding-top: env(safe-area-inset-top, 0px);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.pb-safe {
  padding-bottom: max(1.5rem, env(safe-area-inset-bottom, 0px));
}

/* Location dot pulse animations */
@keyframes dot-pulse-green {
  0%, 100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.5); }
  50% { box-shadow: 0 0 6px 3px rgba(74, 222, 128, 0.25); }
}

@keyframes dot-pulse-red {
  0%, 100% { box-shadow: 0 0 0 0 rgba(248, 113, 113, 0.5); }
  50% { box-shadow: 0 0 6px 3px rgba(248, 113, 113, 0.25); }
}

.dot-pulse-green {
  animation: dot-pulse-green 2s ease-in-out infinite;
}

.dot-pulse-red {
  animation: dot-pulse-red 2s ease-in-out infinite;
}

/* Ask AI animated glow border */
@keyframes glow-spin {
  0% { --glow-angle: 0deg; }
  100% { --glow-angle: 360deg; }
}

@property --glow-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

.ask-ai-glow {
  position: relative;
}

.ask-ai-glow::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: conic-gradient(
    from var(--glow-angle),
    transparent 40%,
    #e3193766 55%,
    #e31937aa 60%,
    #e3193766 65%,
    transparent 80%
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: glow-spin 4s linear infinite;
  pointer-events: none;
}

.ask-ai-glow::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: conic-gradient(
    from var(--glow-angle),
    transparent 40%,
    #e3193722 55%,
    #e3193744 60%,
    #e3193722 65%,
    transparent 80%
  );
  filter: blur(8px);
  animation: glow-spin 4s linear infinite;
  pointer-events: none;
  z-index: -1;
}

/* Streaming cursor for AI chat */
@keyframes blink-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.streaming-cursor::after {
  content: "▋";
  animation: blink-cursor 0.8s step-end infinite;
  color: var(--muted-fg);
  font-size: 10px;
  margin-left: 1px;
}

/* Mobile: prevent text selection on interactive elements */
@media (max-width: 767px) {
  button, a, [role="button"] {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Improve touch targets */
  input[type="text"] {
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
}
